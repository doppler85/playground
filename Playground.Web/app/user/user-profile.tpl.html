<style type="text/css">
.dropbox {
    width: 15em;
    height: 3em;
    border: 2px solid #DDD;
    border-radius: 8px;
    background-color: #FEFFEC;
    text-align: center;
    color: #BBB;
    font-size: 2em;
    font-family: Arial, sans-serif;
}
.dropbox span {
    margin-top: 0.9em;
    display: block;
}
.dropbox.not-available {
    background-color: #F88;
}
.dropbox.over {
    background-color: #bfb;
}
</style>
<div class="page-header">
    <h1>{{currentUser.userName}}
</div>

<div class="row">
    <tabset>
        <tab heading="My info">    
            <div class="span6">
                <h3>Profile picture</h3>
                <canvas id="myCanvas" width="200" height="200" style="border:1px solid #d3d3d3;" data-drawing=""></canvas>
                <form >
                    <img src="content/assets/img/content/dragan-kojic.png" alt="" style="width:200px; height: 200px;">
                    <a href="javascript:;">change</a>
                </form>

                <div>
                    <label for="inputImage2">Image 2</label>
            
                    <input id="inputImage2" 
                        type="file" 
                        accept="image/*" 
                        image="image2" 
                        resize-max-height="200"
                        resize-max-width="200"
                        resize-quality="0.7" />
            
                    <p>Resized</p>
                    <img-cropped src='{{ggg}}' selected='selected(cords)'>
                    <button type="button" ng-click="setcropping('content/assets/img/content/dragan-kojic.png')">set image</button>
                    <img ng-show="image2" ng-src="{{image2.resized.dataURL}}"/>
                    <button type="submit" ng-click="single(image2.resized)">Add</button>
                </div>
                <input type="file" file-upload multiple/>
                <ul>
                    <li ng-repeat="file in files">{{file.name}}</li>
                </ul>
                <button class="btn" data-ng-click="save()">save</button>
            </div>

            <div class="span6">
            <h3>My info</h3>
                <form class="form-horizontal">
                    <div class="control-group">
                        <label class="control-label">First name</label>
                        <div class="controls">
                            <input type="text" data-ng-model="profile.firstName" />
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Last name</label>
                        <div class="controls">
                            <input type="text" data-ng-model="profile.lastName" />
                        </div>
                    </div>
                    <div class="control-group">
                        <div class="controls">
                            <button class="btn" data-ng-click="updateProfile()">update</button>
                        </div>
                    </div>
                </form>
            </div>
        </tab>
        <tab heading="My pleya's">
            <div class="span12">
                    <h3>My pleya's</h3>
                    <table class="table">
                        <tr>
                            <th>
                                Game
                            </th>
                            <th>
                                Player nick
                            </th>
                            <th>Creation date</th>
                            <th></th>
                        </tr>
                        <tr data-ng-repeat="player in players">
                            <td data-ng-bind="player.games[0].game.category.title"></td>
                            <td data-ng-bind="player.name"></td>
                            <td data-ng-bind="player.creationDate | date:'yyyy-MM-dd HH:mm:ss'"></td>
                            <td>
                                <button class="btn btn-primary" data-ng-click="deleteCompetitor(player, players, $index, playerAlerts);">delete</button>
                            </td>
                        </tr>
                     </table>
                    <a data-ui-sref="player-add">add player</a>
                    <alert ng-repeat="alert in playerAlerts" type="alert.type" close="closeAlert(playerAlerts, $index)">{{alert.msg}}</alert>
            </div>
        </tab>
        <tab heading="My teams">
            <div class="span12">
                <h3>My teams</h3>
                <table class="table">
                    <tr>
                        <th>
                            Game
                        </th>
                        <th>
                            Team nick
                        </th>
                        <th>Creation date</th>
                        <th></th>
                    </tr>
                    <tr data-ng-repeat="team in teams">
                        <td data-ng-bind="team.games[0].game.category.title"></td>
                        <td data-ng-bind="team.name"></td>
                        <td data-ng-bind="team.creationDate | date:'yyyy-MM-dd HH:mm:ss'"></td>
                        <td>
                            <button class="btn btn-primary" data-ng-click="deleteCompetitor(team, teams, $index, teamAlerts);">delete</button>
                        </td>
                    </tr>
                 </table>
                <a data-ui-sref="team-add">add team</a>
                <alert ng-repeat="alert in teamAlerts" type="alert.type" close="closeAlert(teamAlerts, $index)">{{alert.msg}}</alert>
            </div>
        </tab>
        <tab heading="My matches">
        <div class="span12">
            <h3>My matches</h3>
            <table class="table">
                <tr>
                    <th>
                        Game
                    </th>
                    <th>
                        Date
                    </th>
                    <th>
                        Competitor
                    </th>
                    <th>
                        Score
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                        Confirmation
                    </th>
                </tr>
                <tbody data-ng-repeat="match in matches">
                    <tr data-ng-repeat="score in match.scores">
                        <td>
                            {{$index == 0 ? match.game.title : ''}}
                        </td>
                        <td>
                            {{$index == 0 ? match.date : '' | date:'yyyy-MM-dd HH:mm:ss'}}
                        </td>
                        <td data-ng-class="{winner : score.competitorID == match.winnerID}">
                            {{score.competitor.name}}
                        </td>
                        <td>
                            {{score.score}}
                        </td>
                        <td>
                            {{$index == 0 ? matchStatuses[match.status] : ''}}
                        </td>
                        <td>
                            <button class="btn btn-primary btn-small" 
                                    data-ng-show="!score.confirmed && score.competitor.isCurrentUserCompetitor"
                                    data-ng-click="confirmScore(match, score,  $index, teamAlerts);">confirm</button>
                        </td>
                    </tr>
                </tbody>
             </table>
            <a data-ui-sref="match-add">add match</a>
            </div>
        </tab>
        <tab heading="My automatic confirmations">
            <h3>My automatic confirmations</h3>
            <table class="table">
                <tr>
                    <th>
                        User
                    </th>
                    <th>

                    </th>
                </tr>
                <tr data-ng-repeat="confirmation in automaticMatchConfirmations">
                    <td data-ng-bind="confirmation.confirmee | userfull"></td>
                    <td>
                        <button class="btn btn-primary" data-ng-click="deleteAutomaticConfirmation(confirmation.confirmee, $index)">remove</button>
                    </td>
                </tr>
            </table>
            <div class="add-confirmation-wrapp" >
                <a href="javascript:;" data-ng-click="toggleAddConfirmation(true)" data-ng-hide="addingconfirmation">add confirmation</a>
                <div class="add-confirmation-inner" data-ng-show="addingconfirmation" >
                    <form class="form-inline">
                        <input type="text" data-ng-model="searchQuery" placeholder="Search users">
                        <button class="btn" data-ng-click="searchAutomaticConfirmationUsers()">Search</button>
                        <button class="btn" data-ng-click="toggleAddConfirmation(false)">cancel</button>
                    </form>
                    <span data-ng-show="automaticMatchConfirmationsUsers.length > 0">
                        Results
                    </span>
                    <table class="table">
                        <tr data-ng-repeat="user in automaticMatchConfirmationsUsers">
                            <td data-ng-bind="user | userfull"></td>
                            <td>
                                <button class="btn btn-primary" data-ng-click="addAutomaticConfirmation(user, $index)">add</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </tab>
    </tabset>
</div>
